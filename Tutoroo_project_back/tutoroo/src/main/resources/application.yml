server:
  port: 8080
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

spring:
  application:
    name: tutoroo

  # [보안] secret 파일 로드 (DB, AI Key 등)
  profiles:
    include: secret

  # [성능] Java 21 가상 스레드 활성화
  threads:
    virtual:
      enabled: true

  # [파일] 업로드 용량 제한 해제
  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 20MB

  # [JSON] 날짜 포맷 통일
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Seoul

  # [빈] 재정의 허용
  main:
    allow-bean-definition-overriding: true

  # [Flyway] DB 형상 관리 (데이터 보존 모드)
  flyway:
    enabled: true
    baseline-on-migrate: false
    # [핵심 수정] true로 설정하여 DB 삭제(clean)를 원천 차단합니다.
    # 이제 서버를 재시작해도 데이터가 유지됩니다.
    clean-disabled: true

# [MyBatis] 설정 유지
mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.tutoroo.entity
  configuration:
    map-underscore-to-camel-case: true
    jdbc-type-for-null: NULL
    call-setters-on-nulls: true
    default-fetch-size: 100

logging:
  level:
    root: INFO
    com.tutoroo: DEBUG
    com.tutoroo.mapper: DEBUG
    org.springframework.security: INFO
    org.springframework.web: INFO