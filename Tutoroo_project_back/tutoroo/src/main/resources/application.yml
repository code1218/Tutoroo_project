server:
  port: 8080
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

spring:
  application:
    name: tutoroo

  # [핵심] application-secret.yml 파일을 함께 로드합니다.
  # (DB, Redis, AI, OAuth2, Mail, Payment 설정은 secret 파일에 있습니다)
  profiles:
    include: secret

  # [Upgrade] Java 21 가상 스레드 활성화 (성능 최적화)
  threads:
    virtual:
      enabled: true

  # [JSON 직렬화 설정]
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Seoul

  # [Bean 재정의 허용]
  main:
    allow-bean-definition-overriding: true

  # [Flyway] DB 형상 관리 (안전 모드)
  flyway:
    enabled: true
    baseline-on-migrate: true
    clean-disabled: true

  # [주의] OAuth2 클라이언트 설정은 application-secret.yml에 정의되어 있으므로
  # 이곳에는 작성하지 않습니다. (중복 작성 시 설정 충돌 우려)

mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.tutoroo.entity
  configuration:
    map-underscore-to-camel-case: true
    jdbc-type-for-null: NULL
    # [설정] Null 값이 조회되어도 Setter를 호출하여 필드(Key)를 유지함 (Map 리턴 시 유용)
    call-setters-on-nulls: true
    default-fetch-size: 100

logging:
  level:
    root: INFO
    com.tutoroo: DEBUG
    com.tutoroo.mapper: DEBUG
    org.springframework.security: INFO
    org.springframework.web: INFO