spring:
  profiles:
    active: dev
    group:
      dev: dev, common, secret-dev
      junil: junil-server, common, secret-prod
      jaewon: jaewon-server, common, secret-prod
      gyeonggu: gyeonggu-server, common, secret-prod
      seongyeop: seongyeop-server, common, secret-prod
      sohyun: sohyun-server, common, secret-prod
---
spring:
  config:
    activate:
      on-profile: dev

      
# [CORS] 프론트엔드 접근 허용 도메인 목록 (추가됨)
app:
  cors:
    allowed-origins:
      - "http://localhost:5173/"      # React 로컬 개발용
      - "http://localhost:3000/"      # 예비용 포트
      - "http://127.0.0.1:5500/"      # Live Server 등

---
spring:
  config:
    activate:
      on-profile: junil-server

domain:
  name:
    http: http://ongirog.com
    https: https://ongirog.com
app:
  cors:
    allowed-origins:
      - "https://ongirog.com"

---
spring:
  config:
    activate:
      on-profile: jaewon-server

domain:
  name:
    http: http://tutoroo-study.shop
    https: https://tutoroo-study.shop
app:
  cors:
    allowed-origins:
      - "https://tutoroo-study.shop"

---
spring:
  config:
    activate:
      on-profile: gyeonggu-server

domain:
  name:
    http: http://gettutoroo.store
    https: https://gettutoroo.store
app:
  cors:
    allowed-origins:
      - "https://gettutoroo.store"
---

---
spring:
  config:
    activate:
      on-profile: seongyeop-server

domain:
  name:
    http: http://bndadtutoroo.com
    https: https://bndadtutoroo.com
app:
  cors:
    allowed-origins:
      - "https://bndadtutoroo.com"
---

---
spring:
  config:
    activate:
      on-profile: sohyun-server

domain:
  name:
    http: http://bnmamatutoroo.com
    https: https://bnmamatutoroo.com
app:
  cors:
    allowed-origins:
      - "https://bnmamatutoroo.com"
---
server:
  port: 8080
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

spring:
  application:
    name: tutoroo

  # [보안] secret 파일 로드 (DB, AI Key 등)
  profiles:
    include: secret

  # [성능] Java 21 가상 스레드 활성화
  threads:
    virtual:
      enabled: true

  # [파일] 업로드 용량 제한 해제
  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 20MB

  # [JSON] 날짜 포맷 통일
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Seoul

  # [빈] 재정의 허용
  main:
    allow-bean-definition-overriding: true

  # [Flyway] DB 형상 관리 (데이터 보존 모드)
  flyway:
    enabled: true
    baseline-on-migrate: false
    # [핵심 수정] true로 설정하여 DB 삭제(clean)를 원천 차단합니다.
    # 이제 서버를 재시작해도 데이터가 유지됩니다.
    clean-disabled: true

# [MyBatis] 설정 유지
mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.tutoroo.entity
  configuration:
    map-underscore-to-camel-case: true
    jdbc-type-for-null: NULL
    call-setters-on-nulls: true
    default-fetch-size: 100

logging:
  level:
    root: INFO
    com.tutoroo: DEBUG
    com.tutoroo.mapper: DEBUG
    org.springframework.security: INFO
    org.springframework.web: INFO

# [CORS] 프론트엔드 접근 허용 도메인 목록 (추가됨)
app:
  cors:
    allowed-origins:
      - "http://localhost:5173"      # React 로컬 개발용
      - "http://localhost:3000"      # 예비용 포트
      - "http://127.0.0.1:5500"      # Live Server 등
